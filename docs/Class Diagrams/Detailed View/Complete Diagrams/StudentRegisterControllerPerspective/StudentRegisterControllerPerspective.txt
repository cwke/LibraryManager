@startuml
skinparam nodesep 50
'hide members

' --- RELATIONS ---
StudentRegisterController "1" -d-> "1" "SideBarController"
StudentRegisterController "1" -d-> "1" "Register<T>"
StudentRegisterController .l.> StudentInsertPopupController
StudentRegisterController .r.> StudentModifyPopupController

StudentInsertPopupController "1" -u-> "1" "RegisterAdder<T>"
StudentInsertPopupController "1" -d-> "1" "RegisterValidator<T>"
StudentInsertPopupController -u-|> StudentPopupController


StudentModifyPopupController "1" -u-> "1" "RegisterModifier<T>"
StudentModifyPopupController -u-|> StudentPopupController
StudentModifyPopupController "1" -d-> "1" Student


' --- CLASSES ---

class Student {
    - name : String
    - surname : String
    - studentId : String {readOnly}
    - email : String
    - activeLoans : List<Loan>

    + Student(name : String, surname : String, studentId : String, email : String)
    + getName() : String
    + getSurname() : String
    + getStudentId() : String
    + getEmail() : String
    + getActiveLoans() : List<Loan>
    + copy(newData : Student) : void
    + addActiveLoan(loanToAdd : Loan) : void
    + removeActiveLoan(loanToRemove : Loan) : void
    + isValid() : boolean
    + isAvailableForLoan() : boolean
    - isStudentIdValid(studentId : String) : boolean
    - isEmailValid(email : String) : boolean
}

interface "Register<T>" {
    + add(toAdd : T) : void
    + modify(oldItem : T, newItem : T) : void
    + remove(toRemove : T) : void
    + isUnique(toVerify : T) : boolean
    + getRegisterList() : List<T>
}

interface "RegisterAdder<T>" {
    + add(toAdd : T) : void
}

interface "RegisterModifier<T>" {
    + modify(oldItem : T, newItem : T) : void
}

interface "RegisterValidator<T>" {
    + isUnique(toVerify : T) : boolean
}

class SideBarController {
    - addBtn : Button
    - searchBarTF : TextField
    - removeBtn : Button
    - modifyBtn : Button

    + getAddBtn() : Button
    + getSearchBarTF() : TextField
    + getRemoveBtn() : Button
    + getModifyBtn() : Button
}

class StudentRegisterController {
    - studentTable : TableView<Student>
    - nameClm : TableColumn<Student, String>
    - surnameClm : TableColumn<Student, String>
    - studentIdClm : TableColumn<Student, String>
    - emailClm : TableColumn<Student, String>
    - studentRegister : Register<Student>
    - sideBarController : SideBarController

    + StudentRegisterController(studentRegister : Register<Student>)
    + initialize() : void
    + updateTableView() : void
    - openInsertPopup() : void
    - openModifyPopup() : void
    - removeFromRegister() : void
    - searchBook() : void
}

abstract class StudentPopupController {
    # nameTF : TextField
    # surnameTF : TextField
    # studentIdTF : TextField
    # emailTF : TextField
    # confirmBtn : Button
    # cancelBtn : Button

    + initialize() : void
    + {abstract} confirmBtnAction(event : ActionEvent) : void
    + cancelBtnAction(event : ActionEvent) : void
    # showAlert(type : Alert.AlertType, title : String, header : String, content : String) : void
}

class StudentInsertPopupController {
    - studentRegisterAdder : RegisterAdder<Student>
    - studentRegisterValidator : RegisterValidator<Student>

    + StudentInsertPopupController(studentRegisterAdder : RegisterAdder<Student>, studentRegisterValidator : RegisterValidator<Student>)
}

class StudentModifyPopupController {
    - studentRegisterModifier : RegisterModifier<Student>
    - studentToModify : Student

    + StudentModifyPopupController(studentRegisterModifier : RegisterModifier<Student>, studentToModify : Student)
    + initialize() : void
}
@enduml