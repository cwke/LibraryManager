@startuml
skinparam nodesep 50
'hide members

Student "1" -r- "3" Loan

Loan "*" -r-> "1" Book

BookRegister "1" -d-> "*" Book
BookRegister .u.|> "Register<T>"

StudentRegister "1" -d-> "*" Student
StudentRegister .u.|> "Register<T>"

LoanRegister "1" -d-> "*" Loan
LoanRegister .u.|> "Register<T>"

Library "1" -d-> "3" "Register<T>"

class Student {
    - name : String
    - surname : String
    - studentId : String {readOnly}
    - email : String
    - activeLoans : List<Loan>

    + Student(...)
    + getName() : String
    + getSurname() : String
    + getStudentId() : String
    + getEmail() : String
    + getActiveLoans() : List<Loan>
    + copy(...) : void
    + addActiveLoan(...) : void
    + removeActiveLoan(...) : void
    + isValid() : boolean
    + isAvailableForLoan() : boolean
    - isStudentIdValid(...) : boolean
    - isEmailValid(...) : boolean
}

class Loan {
    - loanId : UUID {readOnly}
    - student : Student {readOnly}
    - book : Book {readOnly}
    - loanEnd : LocalDate
    - returned : boolean

    + Loan(...)
    + getLoanId() : UUID
    + getStudent() : Student
    + getBook() : Book
    + getLoanEnd() : LocalDate
    + isReturned() : boolean
    + setLoanEnd(...) : void
    + returnLoan() : void
    + activateLoan() : void
    + isDelay() : boolean
    - isActivable() : boolean
    - isValid() : boolean
}

class Book {
    - title : String
    - authors : List<String>
    - bookId : String {readOnly}
    - publishmentYear : int
    - availableCopies : int

    + Book(...)
    + getTitle() : String
    + getAuthors() : List<String>
    + getBookId() : String
    + getPublishmentYear() : int
    + getAvailableCopies() : int
    + setAvailableCopies(...) : void
    + copy(...) : void
    + isAvailableForLoan() : boolean
    - isValid() : boolean
    - isBookIdValid(...) : boolean
    - isPublishmentYearValid(...) : boolean
    - isAvailableCopiesValid(...) : boolean
}

interface "Register<T>" {
    + add(...) : void
    + modify(...) : void
    + remove(...) : void
    + isUnique(...) : boolean
    + getRegisterList() : List<T>
}

class BookRegister {
    - bookRegister : Set<Book>

    + BookRegister()
}

class StudentRegister {
    - studentRegister : Set<Student>

    + StudentRegister()
}

class LoanRegister {
    - loanRegister : Set<Loan>

    + LoanRegister()
}

class Library {
    - bookRegister : Register<Book>
    - studentRegister : Register<Student>
    - loanRegister : Register<Loan>

    + Library()
    + getBookRegister() : Register<Book>
    + getStudentRegister() : Register<Student>
    + getLoanRegister() : Register<Loan>
}
@enduml